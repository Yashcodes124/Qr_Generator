<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QRGen Pro - Advanced QR Code Generator</title>
    <link rel="stylesheet" href="main.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  </head>
  <body>
    <!-- Auth Modal -->
    <div id="authModal" class="modal" style="display: none">
      <div class="modal-content">
        <!-- Login Form -->
        <div id="loginForm">
          <span id="close-modal" class="close-modal"
            ><i class="fa-solid fa-xmark"></i
          ></span>
          <h3>ğŸ” Login to QRcify Pro</h3>
          <div class="form-group">
            <input
              type="email"
              id="loginEmail"
              placeholder="Email"
              class="form-input"
            />
            <input
              type="password"
              id="loginPassword"
              placeholder="Password"
              class="form-input"
            />
            <button onclick="handleLogin()" class="btn btn-primary">
              Login
            </button>
          </div>
          <p>
            Don't have an account?
            <a
              href="#"
              style="text-decoration: none; color: rgb(215, 90, 90)"
              onclick="showRegisterForm()"
              >Register here</a
            >
          </p>
        </div>

        <!-- Register Form -->
        <div id="registerForm" style="display: none">
          <span id="close-modal" class="close-modal"
            ><i class="fa-solid fa-xmark"></i
          ></span>
          <h3>ğŸš€ Create Account</h3>
          <div class="form-group">
            <input
              type="text"
              id="registerName"
              placeholder="Full Name"
              class="form-input"
            />
            <input
              type="email"
              id="registerEmail"
              placeholder="Email"
              class="form-input"
            />
            <input
              type="password"
              id="registerPassword"
              placeholder="Password"
              class="form-input"
            />
            <button onclick="handleRegister()" class="btn btn-secondary">
              Create Account
            </button>
          </div>
          <p>
            Already have an account?
            <a href="#" onclick="showLoginForm()">Login here</a>
          </p>
        </div>
      </div>
    </div>

    <!-- User Menu  (it will replace auth modal when logged in) -->
    <div id="userMenu" style="display: none">
      <button id="userDropdown" class="btn btn-outline">ğŸ‘¤ User</button>
      <div id="dropdownMenu" class="dropdown-content">
        <a href="#" onclick="showDashboard()">ğŸ“Š Dashboard</a>
        <a href="#" onclick="showProfile()">âš™ï¸ Profile</a>
      </div>
      <div style="position: fixed; top: 10px; right: 10px; z-index: 10000">
        <button onclick="handleLogout()" class="btn btn-warning">
          ğŸšª Logout
        </button>
      </div>
    </div>
    <!-- Navigation Header -->
    <!-- Enhanced Header -->
    <header class="header">
      <div class="container">
        <div class="logo">
          <h1>ğŸ” QRcify Pro</h1>
          <span class="tagline">Secure QR Code Generator</span>
        </div>
        <nav class="nav">
          <a href="#basic" class="nav-link">Basic QR</a>
          <a href="#secure" class="nav-link">Secure QR</a>
          <a href="#advanced" class="nav-link">Advanced</a>
          <a href="#decrypt" class="nav-link">Decrypt</a>

          <!-- Quick Actions (shown when logged in) -->
          <div id="quickActions" class="quick-actions" style="display: none">
            <button
              onclick="showQuickGenerator()"
              class="btn btn-primary"
              style="padding: 8px 16px"
            >
              ğŸš€ Quick Generate
            </button>
            <button
              onclick="showAnalytics()"
              class="btn btn-outline"
              style="padding: 8px 16px"
            >
              ğŸ“Š Analytics
            </button>
          </div>

          <!-- Auth Buttons (shown when logged out) -->
          <div id="authButtons">
            <button onclick="openAuthModal()" class="btn btn-outline">
              Login
            </button>
            <button onclick="openRegisterModal()" class="btn btn-primary">
              Register
            </button>
          </div>

          <!-- User Menu (shown when logged in) -->
          <div id="userMenuContainer"></div>
        </nav>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <div class="container">
        <!-- Hero Section -->
        <section class="hero">
          <h2>Generate Secure QR Codes Instantly</h2>
          <p>
            Create encrypted QR codes for URLs, files, contacts, and WiFi with
            military-grade encryption
          </p>
        </section>

        <!-- Basic QR Section -->
        <section id="basic" class="section card">
          <div class="section-header">
            <h3>ğŸš€ Basic QR Generator</h3>
            <p>Quick and simple QR codes for URLs</p>
          </div>
          <div class="form-group">
            <input
              type="text"
              id="url"
              placeholder="https://example.com"
              class="form-input"
            />
            <button id="generateBtn" class="btn btn-primary">
              Generate QR Code
            </button>
          </div>
          <div id="urlLoader" class="loader-container" style="display: none">
            <div class="loader"></div>
            <span id="urlLoaderText">Generating QR Code...</span>
          </div>
          <div id="output" class="output-container"></div>
        </section>

        <!-- Secure Text QR Section -->
        <section id="secure" class="section card">
          <div class="section-header">
            <h3>ğŸ”’ Secure Text QR</h3>
            <p>Encrypt sensitive text before generating QR codes</p>
          </div>
          <div class="form-group">
            <textarea
              id="secretData"
              rows="4"
              placeholder="Enter your secret message here..."
              class="form-textarea"
            ></textarea>
            <input
              id="passphrase"
              type="password"
              placeholder="Encryption passphrase"
              class="form-input"
            />
            <button id="encryptTextBtn" class="btn btn-secondary">
              Generate Secure QR
            </button>
          </div>
          <div id="textLoader" class="loader-container" style="display: none">
            <div class="loader"></div>
            <span id="textLoaderText">Encrypting and generating...</span>
          </div>
          <div id="qrOutput" class="output-container"></div>
        </section>

        <!-- File Encryption Section -->
        <section class="section card">
          <div class="section-header">
            <h3>ğŸ“ Secure File QR</h3>
            <p>Encrypt files and generate downloadable QR codes</p>
          </div>
          <div class="form-group">
            <input type="file" id="fileInput" class="file-input" />
            <input
              type="password"
              id="filePassphrase"
              placeholder="File encryption passphrase"
              class="form-input"
            />
            <button id="encryptFileBtn" class="btn btn-secondary">
              Encrypt & Generate QR
            </button>
          </div>
          <div id="fileLoader" class="loader-container" style="display: none">
            <div class="loader"></div>
            <span id="fileLoaderText">Encrypting file...</span>
          </div>
          <div id="fileOutput" class="output-container"></div>
        </section>

        <!-- Advanced Features Section -->
        <section id="advanced" class="section card">
          <div class="section-header">
            <h3>âš¡ Advanced QR Types</h3>
            <p>Specialized QR codes for different use cases</p>
          </div>

          <!-- vCard QR -->
          <div class="feature-card">
            <h4>ğŸ“‡ vCard QR Code</h4>
            <div class="form-grid">
              <input
                type="text"
                id="vcardName"
                placeholder="Full Name"
                class="form-input"
              />
              <input
                type="tel"
                id="vcardPhone"
                placeholder="Phone Number"
                class="form-input"
              />
              <input
                type="email"
                id="vcardEmail"
                placeholder="Email Address"
                class="form-input"
              />
              <input
                type="text"
                id="vcardCompany"
                placeholder="Company"
                class="form-input"
              />
            </div>
            <button onclick="generateVCardQR()" class="btn btn-outline">
              Generate vCard QR
            </button>

            <!-- âœ… ADD THIS OUTPUT CONTAINER -->
            <div
              id="vcardOutput"
              class="output-container"
              style="margin-top: 1rem"
            ></div>
          </div>

          <!-- WiFi QR -->
          <div class="feature-card">
            <h4>ğŸ“¶ WiFi QR Code</h4>
            <div class="form-grid">
              <input
                type="text"
                id="wifiSsid"
                placeholder="Network Name (SSID)"
                class="form-input"
              />
              <input
                type="password"
                id="wifiPassword"
                placeholder="WiFi Password"
                class="form-input"
              />
              <select id="wifiEncryption" class="form-select">
                <option value="WPA">WPA/WPA2</option>
                <option value="WEP">WEP</option>
                <option value="nopass">No Encryption</option>
              </select>
            </div>
            <button onclick="generateWifiQR()" class="btn btn-outline">
              Generate WiFi QR
            </button>

            <!-- âœ… ADD THIS OUTPUT CONTAINER -->
            <div
              id="wifiOutput"
              class="output-container"
              style="margin-top: 1rem"
            ></div>
          </div>
        </section>
        <!-- Decryption Section -->
        <section id="decrypt" class="section card">
          <div class="section-header">
            <h3>ğŸ”“ QR Decryption</h3>
            <p>Decrypt your secure QR codes</p>
          </div>

          <!-- Text Decryption -->
          <div class="feature-card">
            <h4>Decrypt Text</h4>
            <div class="form-group">
              <textarea
                id="qrCipher"
                placeholder="Paste encrypted ciphertext from QR code..."
                rows="3"
                class="form-textarea"
              ></textarea>
              <input
                id="userPassphrase"
                type="password"
                placeholder="Decryption passphrase"
                class="form-input"
              />
              <button onclick="decryptText()" class="btn btn-warning">
                Decrypt Text
              </button>
            </div>
          </div>
          <div
            id="decryptLoader"
            class="loader-container"
            style="display: none"
          >
            <div class="loader"></div>
            <span id="decryptLoaderText">Decrypting...</span>
          </div>
          <div id="decryptedOutput" class="output-container"></div>

          <!-- File Decryption -->
          <div class="feature-card">
            <h4>Decrypt File</h4>
            <div class="form-group">
              <input
                type="file"
                id="fileDecryptInput"
                accept=".enc"
                class="file-input"
              />
              <input
                type="password"
                id="fileDecryptPassphrase"
                placeholder="File decryption passphrase"
                class="form-input"
              />
              <button onclick="decryptFile()" class="btn btn-warning">
                Decrypt File
              </button>
            </div>
          </div>

          <div
            id="decryptLoader"
            class="loader-container"
            style="display: none"
          >
            <div class="loader"></div>
            <span id="decryptLoaderFile">Decrypting...</span>
          </div>
          <div id="decryptedFileOutput" class="output-container"></div>
        </section>

        <!-- Stats Section -->
        <section class="section card">
          <div class="section-header">
            <h3>ğŸ“Š Usage Statistics</h3>
            <p>Track your QR code generation</p>
          </div>
          <div id="statsContainer" class="stats-container">
            <button onclick="loadStats()" class="btn btn-outline">
              Load Statistics
            </button>
          </div>
        </section>
        <!-- Quick Generator Modal -->
        <div id="quickGeneratorModal" class="modal" style="display: none">
          <div class="modal-content">
            <span class="close-modal" onclick="closeQuickGenerator()"
              >&times;</span
            >
            <h3>ğŸš€ Quick QR Generator</h3>

            <div class="generator-tabs">
              <button class="generator-tab active" onclick="switchQRTab('url')">
                URL
              </button>
              <button class="generator-tab" onclick="switchQRTab('text')">
                Text
              </button>
              <button class="generator-tab" onclick="switchQRTab('wifi')">
                WiFi
              </button>
            </div>

            <div id="urlTab" class="generator-content active">
              <input
                type="text"
                id="quickUrl"
                placeholder="https://example.com"
                class="form-input"
              />
              <button
                onclick="generateQuickURL()"
                class="btn btn-primary"
                style="margin-top: 1rem; width: 100%"
              >
                Generate QR Code
              </button>
            </div>

            <div id="textTab" class="generator-content">
              <textarea
                id="quickText"
                placeholder="Enter your text here..."
                class="form-textarea"
                rows="3"
              ></textarea>
              <button
                onclick="generateQuickText()"
                class="btn btn-primary"
                style="margin-top: 1rem; width: 100%"
              >
                Generate QR Code
              </button>
            </div>

            <div id="wifiTab" class="generator-content">
              <input
                type="text"
                id="quickSSID"
                placeholder="WiFi Network Name (SSID)"
                class="form-input"
              />
              <input
                type="password"
                id="quickPassword"
                placeholder="WiFi Password"
                class="form-input"
              />
              <button
                onclick="generateQuickWifi()"
                class="btn btn-primary"
                style="margin-top: 1rem; width: 100%"
              >
                Generate WiFi QR
              </button>
            </div>
          </div>
        </div>

        <!-- Analytics Dashboard -->
        <section
          id="analyticsDashboard"
          class="section card"
          style="display: none"
        >
          <div class="section-header">
            <h3>ğŸ“Š Your QR Analytics</h3>
            <p>Track your QR code generation statistics</p>
          </div>

          <div class="metrics-grid">
            <div class="metric-card">
              <span class="metric-value" id="totalQrs">0</span>
              <span class="metric-label">Total QR Codes</span>
            </div>
            <div class="metric-card">
              <span class="metric-value" id="todayActivity">0</span>
              <span class="metric-label">Recent Activity</span>
            </div>
            <div class="metric-card">
              <span class="metric-value" id="popularType">-</span>
              <span class="metric-label">Most Used Type</span>
            </div>
          </div>

          <div style="text-align: center; margin-top: 2rem">
            <button onclick="loadRealStats()" class="btn btn-outline">
              ğŸ”„ Refresh Stats
            </button>
            <button onclick="hideAnalytics()" class="btn btn-primary">
              â† Back to Generator
            </button>
          </div>
        </section>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <p>&copy; 2024 QRcify Pro. Built with PostgreSQL and ERN stack</p>
      </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>
